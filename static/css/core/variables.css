/* ============================
   Design Tokens: Warm Cartographic
   Palette (Premium, Cartographic)
   - Sage Teal:   #3b8a7f (primary)
   - Copper:      #b87a4a (accent)
   - Warm Slate:  #727a84 (secondary)
   - Brick:       #c45454 (danger)
   - Steel:       #5a86b0 (info)
   - Honey:       #d4a24a (warning)
   - Forest:      #4d9a6a (success)

   Refined Surfaces (Warm Dark Neutrals)
   - Surface deep: #0a0a0c
   - Surface 0:    #111113
   - Surface 1:    #18181b
   - Surface 2:    #1e1e22
   - Surface 3:    #27272c

   Radii
   - Containers/cards: 7-12px
   - Controls: 5-7px
   - Pills: 9999px

   Spacing
   - 4px grid (0.25rem - 4rem)

   Typography
   - Display: Chivo (headlines)
   - Body: IBM Plex Sans (excellent data legibility)
   - Mono: JetBrains Mono (superior number clarity)
   ============================ */

:root {
  /* Categorical Palette - Premium & Refined (Phase 1) */
  --cat-sage: #3b8a7f;
  --cat-sage-rgb: 59 138 127;
  --cat-slate: #727a84;
  --cat-slate-rgb: 114 122 132;
  --cat-rose: #c45454;
  --cat-rose-rgb: 196 84 84;
  --cat-steel: #5a86b0;
  --cat-steel-rgb: 90 134 176;
  --cat-ochre: #d4a24a;
  --cat-ochre-rgb: 212 162 74;
  --cat-olive: #4d9a6a;
  --cat-olive-rgb: 77 154 106;
  --cat-sky: #6a9fc0;
  --cat-sky-rgb: 106 159 192;
  --cat-lime: #7aaa58;
  --cat-lime-rgb: 122 170 88;
  --cat-amber: #c49050;
  --cat-amber-rgb: 196 144 80;
  --amber-rgb: var(--cat-amber-rgb);
  --cat-coral: #c47050;
  --cat-coral-rgb: 196 112 80;
  --cat-mint: #4a9a8a;
  --cat-mint-rgb: 74 154 138;
  --cat-red: var(--cat-rose);
  --cat-red-rgb: var(--cat-rose-rgb);
  --cat-purple: #8a7ab0;
  --cat-purple-rgb: 138 122 176;
  --cat-indigo: #6a72a0;
  --cat-indigo-rgb: 106 114 160;

  /* Semantic Colors - Refined (Phase 1) */
  --primary: var(--cat-sage);
  --primary-light: #4da396;
  --primary-dark: #2d6e65;
  --primary-hover: var(--primary-dark);
  --primary-rgb: var(--cat-sage-rgb);
  --secondary: var(--cat-slate);
  --secondary-light: #8c949e;
  --secondary-dark: #5a616a;
  --secondary-rgb: var(--cat-slate-rgb);
  --success: var(--cat-olive);
  --success-light: #6bb285;
  --success-dark: #3b7a53;
  --success-rgb: var(--cat-olive-rgb);
  --warning: var(--cat-ochre);
  --warning-light: #e0b464;
  --warning-dark: #b68433;
  --warning-rgb: var(--cat-ochre-rgb);
  --danger: var(--cat-rose);
  --danger-light: #d67070;
  --danger-dark: #9f3f3f;
  --danger-rgb: var(--cat-rose-rgb);
  --info: var(--cat-steel);
  --info-light: #79a0c0;
  --info-dark: #44688a;
  --info-rgb: var(--cat-steel-rgb);
  --accent: #b87a4a;
  --accent-light: #d09868;
  --accent-dark: #9a6438;
  --accent-rgb: 184 122 74;

  /* Flat colors - no gradients */
  --primary-gradient: var(--primary);
  --secondary-gradient: var(--secondary);
  --success-gradient: var(--success);
  --warning-gradient: var(--warning);
  --danger-gradient: var(--danger);
  --info-gradient: var(--info);

  /* Dark Mode Surfaces (Default) - Refined Premium Palette (Phase 1) */
  --surface-deep: #0a0a0c;
  --surface-0: #111113;
  --surface-1: #18181b;
  --surface-2: #1e1e22;
  --surface-3: #27272c;
  --surface-4: #323238;
  --surface-elevated: #1a1a1d;
  --surface-glass: rgb(24 24 27 / 72%);
  --surface-rgb: 24 24 27;
  --text-primary: rgb(245 242 236 / 92%);
  --text-secondary: rgb(201 196 186 / 78%);
  --text-tertiary: rgb(129 124 116 / 55%);
  --text-on-primary: #0a0a0c;
  --text-on-secondary: #111113;
  --text-on-dark: #0a0a0c;
  --text-on-light: #1c1a18;
  --border-color: rgb(142 134 124 / 22%);
  --border-color-light: rgb(142 134 124 / 35%);
  --divider-color: rgb(142 134 124 / 12%);
  --border-rgb: 142 134 124;
  --text-rgb: 245 242 236;

  /* Typography - Refined (Phase 1) */
  --font-family: "IBM Plex Sans", system-ui, -apple-system, sans-serif;
  --font-family-display: "Chivo", "IBM Plex Sans", system-ui, -apple-system, sans-serif;
  --font-family-mono:
    "JetBrains Mono", "IBM Plex Mono", ui-monospace, sfmono-regular, menlo, monaco, consolas,
    monospace;

  /* Refined Font Size Hierarchy */
  --font-size-xs: clamp(0.72rem, 0.68rem + 0.2vw, 0.82rem);
  --font-size-sm: clamp(0.84rem, 0.8rem + 0.2vw, 0.98rem);
  --font-size-md: clamp(0.9375rem, 0.9rem + 0.2vw, 1rem);
  --font-size-base: var(--font-size-md);
  --font-size-lg: clamp(1.08rem, 1.02rem + 0.3vw, 1.26rem);
  --font-size-xl: clamp(1.125rem, 1.1rem + 0.3vw, 1.5rem);
  --font-size-2xl: clamp(1.5rem, 1.4rem + 0.5vw, 2.25rem);
  --font-size-3xl: clamp(1.8rem, 1.55rem + 1vw, 2.35rem);
  --font-size-4xl: clamp(2rem, 1.8rem + 1vw, 3.5rem);
  --font-size-display: clamp(2.2rem, 2rem + 1.2vw, 3.6rem);
  --font-weight-light: 300;
  --font-weight-regular: 400;
  --font-weight-normal: var(--font-weight-regular);
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;
  --line-height-tight: 1.15;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.7;

  /* Spacing System (4px grid) */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;

  /* Layout rhythm */
  --page-gutter: clamp(1rem, 2.6vw, 2.75rem);
  --page-gutter-tight: clamp(0.75rem, 2.1vw, 1.5rem);
  --section-gap: clamp(1.25rem, 2.4vw, 2.5rem);
  --card-padding: clamp(1rem, 1.6vw, 1.5rem);
  --card-padding-lg: clamp(1.25rem, 2.1vw, 2rem);

  /* Layout */
  --header-height: 64px;
  --content-max-width: 1440px;
  --sidebar-width: 280px;
  --panel-width: 360px;

  /* Effects - Phase 2 Refined Timing */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-smooth: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-spring: 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --transition-spring-fast: 260ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --shadow-xs: 0 1px 2px rgb(0 0 0 / 10%);
  --shadow-sm: 0 4px 12px rgb(0 0 0 / 14%);
  --shadow-md: 0 10px 24px rgb(0 0 0 / 18%);
  --shadow-lg: 0 16px 36px rgb(0 0 0 / 22%);
  --shadow-xl: 0 24px 52px rgb(0 0 0 / 26%);
  --shadow-inset: inset 0 1px 2px rgb(0 0 0 / 16%);
  --shadow-elevation-1: 0 6px 16px rgb(0 0 0 / 14%);
  --shadow-elevation-2: 0 12px 24px rgb(0 0 0 / 18%);
  --shadow-elevation-3: 0 18px 36px rgb(0 0 0 / 22%);
  --shadow-elevation-4: 0 26px 48px rgb(0 0 0 / 25%);
  --shadow-elevation-5: 0 34px 60px rgb(0 0 0 / 28%);

  /* Accent colors */
  --gradient-accent-bar: var(--accent);

  /* Subtle glows for interactive states */
  --glow-primary: 0 0 12px rgb(var(--primary-rgb) / 10%);
  --glow-primary-intense: 0 0 18px rgb(var(--primary-rgb) / 22%);
  --glow-success: 0 0 10px rgb(var(--success-rgb) / 10%);
  --glow-success-intense: 0 0 18px rgb(var(--success-rgb) / 24%);
  --glow-warning: 0 0 12px rgb(var(--warning-rgb) / 18%);
  --glow-danger: 0 0 12px rgb(var(--danger-rgb) / 18%);
  --glow-accent: 0 0 8px rgb(var(--accent-rgb) / 8%);

  /* Gradient surfaces for glassmorphism */
  --gradient-surface-glow: linear-gradient(135deg, rgb(255 255 255 / 3%) 0%, transparent 50%);
  --gradient-ambient: radial-gradient(
    ellipse at top,
    rgb(var(--primary-rgb) / 10%) 0%,
    transparent 60%
  );
  --app-bg:
    radial-gradient(1200px circle at 8% -10%, rgb(var(--primary-rgb) / 6%), transparent 65%),
    radial-gradient(900px circle at 110% 12%, rgb(var(--accent-rgb) / 4%), transparent 60%);

  /* Interactive lift shadows */
  --shadow-lift: 0 12px 26px rgb(0 0 0 / 22%);
  --shadow-lift-intense: 0 18px 36px rgb(0 0 0 / 26%);

  /* Glass + Blur - Refined (Phase 1) */
  --blur-subtle: 8px;
  --blur-strong: 12px;
  --blur-modal: 18px;
  --glass-1: rgb(var(--surface-rgb) / 70%);
  --glass-2: rgb(var(--surface-rgb) / 80%);
  --glass-3: rgb(var(--surface-rgb) / 90%);
  --glass-border: rgb(255 255 255 / 8%);
  --glass-shadow: 0 4px 24px rgb(0 0 0 / 25%), inset 0 1px 0 rgb(255 255 255 / 5%);

  /* Extended Glass Palette */
  --glass-panel: rgb(var(--surface-rgb) / 72%);
  --glass-panel-hover: rgb(var(--surface-rgb) / 78%);
  --glass-dropdown: rgb(var(--surface-rgb) / 85%);
  --glass-input: rgb(var(--surface-rgb) / 45%);
  --glass-input-focus: rgb(var(--surface-rgb) / 55%);

  /* Glass borders - enhanced */
  --glass-border-subtle: rgb(var(--border-rgb) / 8%);
  --glass-border-medium: rgb(var(--border-rgb) / 15%);
  --glass-border-strong: rgb(var(--border-rgb) / 22%);

  /* Semantic street colors */
  --color-undriven: var(--cat-coral);
  --color-undriven-rgb: var(--cat-coral-rgb);
  --color-driven: var(--success);

  /* Toggle/switch */
  --toggle-knob: var(--surface-1);
  --toggle-track-off: rgb(var(--border-rgb) / 25%);
  --toggle-track-on: var(--primary);

  /* Glass shadows */
  --shadow-glass-sm: 0 2px 10px rgb(0 0 0 / 28%), inset 0 1px 0 rgb(255 255 255 / 6%);
  --shadow-glass-md: 0 10px 26px rgb(0 0 0 / 32%), inset 0 1px 0 rgb(255 255 255 / 6%);
  --shadow-glass-lg: 0 18px 56px rgb(0 0 0 / 36%), inset 0 1px 0 rgb(255 255 255 / 6%);

  /* Border Radius - More subtle */
  --radius-xs: 3px;
  --radius-sm: 5px;
  --radius-md: 7px;
  --radius-lg: 9px;
  --radius-xl: 12px;
  --radius-2xl: 16px;
  --radius-full: 9999px;
  --radius-pill: 9999px;

  /* Focus */
  --focus-ring: 0 0 0 3px rgb(var(--accent-rgb) / 24%);
  --focus-ring-strong: 0 0 0 4px rgb(var(--accent-rgb) / 32%);
  --focus-outline: 2px solid rgb(var(--accent-rgb) / 60%);

  /* Touch targets */
  --touch-target: 44px;

  /* Z-Index */
  --z-base: 1;
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-drawer: 1040;
  --z-modal-backdrop: 1050;
  --z-modal: 1055;
  --z-popover: 1060;
  --z-tooltip: 1070;
  --z-overlay: 1080;
  --z-loading-overlay: 9999;

  /* Scrollbar */
  --scrollbar-thumb-color: rgb(var(--border-rgb) / 45%);
  --scrollbar-track-color: transparent;
  --scrollbar-thumb-hover-color: rgb(var(--border-rgb) / 65%);

  /* Utility Aliases */
  --text-color: var(--text-primary);
  --primary-color: var(--primary);
  --accent-color: var(--accent);
  --font-mono: var(--font-family-mono);
  --border-hover: var(--border-color-light);

  /* Bootstrap Bridge */
  --bs-body-font-family: var(--font-family);
  --bs-body-font-size: var(--font-size-md);
  --bs-body-bg: var(--surface-0);
  --bs-body-bg-rgb: var(--surface-rgb);
  --bs-body-color: var(--text-primary);
  --bs-secondary-color: var(--text-secondary);
  --bs-tertiary-color: var(--text-tertiary);
  --bs-secondary-bg: var(--surface-2);
  --bs-tertiary-bg: var(--surface-3);
  --bs-border-color: var(--border-color);
  --bs-border-radius: var(--radius-lg);
  --bs-border-radius-sm: var(--radius-md);
  --bs-border-radius-lg: var(--radius-xl);
  --bs-border-radius-xl: var(--radius-xl);
  --bs-border-radius-xxl: calc(var(--radius-xl) + 4px);
  --bs-border-radius-pill: var(--radius-pill);
  --bs-primary: var(--primary);
  --bs-primary-rgb: var(--primary-rgb);
  --bs-secondary: var(--secondary);
  --bs-secondary-rgb: var(--secondary-rgb);
  --bs-success: var(--success);
  --bs-success-rgb: var(--success-rgb);
  --bs-info: var(--info);
  --bs-info-rgb: var(--info-rgb);
  --bs-warning: var(--warning);
  --bs-warning-rgb: var(--warning-rgb);
  --bs-danger: var(--danger);
  --bs-danger-rgb: var(--danger-rgb);
  --bs-light: var(--surface-2);
  --bs-dark: var(--surface-4);
  --bs-link-color: var(--primary);
  --bs-link-hover-color: var(--primary-dark);
  --bs-box-shadow: var(--shadow-sm);
  --bs-focus-ring-color: rgb(var(--accent-rgb) / 25%);
}

/* Light Mode Overrides - Premium Feel (Phase 1) */
body.light-mode {
  --surface-0: #faf9f7;
  --surface-1: #fff;
  --surface-2: #f3f2ef;
  --surface-3: #e7e5e1;
  --surface-4: #dbd8d3;
  --surface-elevated: #f7f5f2;
  --surface-glass: rgb(255 255 255 / 88%);
  --surface-rgb: 250 249 247;
  --text-primary: rgb(28 26 23 / 92%);
  --text-secondary: rgb(87 83 78 / 75%);
  --text-tertiary: rgb(140 136 129 / 55%);
  --border-color: rgb(28 24 21 / 6%);
  --border-color-light: rgb(28 24 21 / 12%);
  --divider-color: rgb(28 24 21 / 4%);
  --border-rgb: 28 24 21;
  --text-rgb: 28 26 23;
  --shadow-xs: 0 1px 2px rgb(15 22 33 / 6%);
  --shadow-sm: 0 4px 12px rgb(15 22 33 / 10%);
  --shadow-md: 0 10px 24px rgb(15 22 33 / 14%);
  --shadow-lg: 0 16px 36px rgb(15 22 33 / 16%);
  --shadow-xl: 0 24px 52px rgb(15 22 33 / 18%);
  --shadow-elevation-1: 0 6px 16px rgb(15 22 33 / 10%);
  --shadow-elevation-2: 0 12px 24px rgb(15 22 33 / 12%);
  --shadow-elevation-3: 0 18px 36px rgb(15 22 33 / 14%);
  --shadow-elevation-4: 0 26px 48px rgb(15 22 33 / 16%);
  --shadow-elevation-5: 0 34px 60px rgb(15 22 33 / 18%);
  --scrollbar-thumb-color: rgb(var(--border-rgb) / 28%);
  --scrollbar-track-color: rgb(var(--border-rgb) / 6%);
  --scrollbar-thumb-hover-color: rgb(var(--border-rgb) / 42%);
  --glass-1: rgb(var(--surface-rgb) / 82%);
  --glass-2: rgb(var(--surface-rgb) / 90%);
  --glass-3: rgb(var(--surface-rgb) / 96%);
  --glass-border: rgb(var(--border-rgb) / 18%);
  --app-bg: radial-gradient(
    1100px circle at 12% -12%,
    rgb(var(--primary-rgb) / 4%),
    transparent 60%
  );

  /* Extended glass for light mode */
  --glass-panel: rgb(var(--surface-rgb) / 75%);
  --glass-panel-hover: rgb(var(--surface-rgb) / 82%);
  --glass-dropdown: rgb(var(--surface-rgb) / 88%);
  --glass-input: rgb(var(--surface-rgb) / 50%);
  --glass-input-focus: rgb(var(--surface-rgb) / 60%);
  --toggle-knob: var(--surface-0);

  /* Light mode glass borders */
  --glass-border-subtle: rgb(var(--border-rgb) / 6%);
  --glass-border-medium: rgb(var(--border-rgb) / 12%);
  --glass-border-strong: rgb(var(--border-rgb) / 18%);

  /* Light mode glass shadows */
  --shadow-glass-sm: 0 2px 8px rgb(0 0 0 / 10%), inset 0 1px 0 rgb(255 255 255 / 50%);
  --shadow-glass-md: 0 8px 24px rgb(0 0 0 / 12%), inset 0 1px 0 rgb(255 255 255 / 50%);
  --shadow-glass-lg: 0 16px 48px rgb(0 0 0 / 15%), inset 0 1px 0 rgb(255 255 255 / 50%);
}

/* Changelog: Modern Soft-Tech UI
   - Before: minimalist palette, tight radii, row-based layouts.
   - After: matte neon-pastel categories, pill controls, 20-24px radii.
   - Layout: Bento grid widgets with consistent headers/accents and staggered reveal.
   - Coverage Navigator: stacked widget panel + tokenized map legend accents.
   - Insights/Visits/Search: legacy duplicates removed, motion softened, tokens normalized.
*/
