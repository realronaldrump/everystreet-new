/* ============================
   Notification Components - Phase 3 Refined
   ============================ */

/* === Notifications - Glassmorphism === */
.notification-container {
  position: fixed;
  top: var(--space-4);
  right: var(--space-4);
  z-index: var(--z-tooltip);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  width: min(380px, calc(100vw - (var(--space-4) * 2)));
  max-width: calc(100vw - (var(--space-4) * 2));
  pointer-events: none;
}

.notification {
  background: var(--glass-2);
  backdrop-filter: blur(var(--blur-strong));
  border-radius: var(--radius-lg);
  padding: var(--space-3) var(--space-4);
  box-shadow: var(--shadow-glass-lg);
  transform: translateX(120%);
  opacity: 0;
  transition:
    transform var(--transition-spring) cubic-bezier(0.34, 1.56, 0.64, 1),
    opacity var(--transition-normal);
  pointer-events: auto;
  border: 1px solid var(--glass-border);
  border-left: 3px solid var(--primary);
  display: flex;
  align-items: flex-start;
  width: 100%;
}

.notification.show {
  transform: translateX(0);
  opacity: 1;
}

/* Notification enter animation with stagger */
.notification:nth-child(1).show {
  transition-delay: 0ms;
}

.notification:nth-child(2).show {
  transition-delay: 50ms;
}

.notification:nth-child(3).show {
  transition-delay: 100ms;
}

.notification-icon {
  font-size: var(--font-size-xl);
  margin-right: var(--space-3);
  display: flex;
  align-items: center;
  height: calc(var(--font-size-sm) * var(--line-height-normal));
  flex-shrink: 0; /* Prevent icon from shrinking */
}

.notification-content {
  flex: 1;
  min-width: 0; /* Allow content to shrink if needed */
}

.notification-title {
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-1);
  color: var(--text-primary);
}

.notification-message {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  line-height: var(--line-height-normal);
}

.notification-close {
  background: transparent;
  border: none;
  color: var(--text-tertiary);
  cursor: pointer;
  padding: var(--space-1);
  margin-left: var(--space-2);
  font-size: var(--font-size-lg);
  transition: color var(--transition-fast);
  align-self: flex-start; /* Align close button to top right */
}

.notification-close:hover {
  color: var(--text-secondary);
}

/* Minimized coverage-job progress badge (global) */
.minimized-progress-badge {
  position: fixed;
  bottom: 20px;
  left: 20px;
  z-index: var(--z-drawer);
  background: var(--surface-glass);
  color: var(--text-on-dark);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-pill);
  box-shadow: var(--shadow-lg);
  backdrop-filter: blur(var(--blur-subtle));
  border: 1px solid var(--glass-border-medium);
  cursor: pointer;
  transition: var(--transition-fast);
  animation: slideInUp 0.3s ease-out;
}

.minimized-progress-badge:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-xl);
  background: var(--surface-elevated);
}

.minimized-progress-badge .minimized-location-name {
  max-width: 150px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 500;
}

.minimized-progress-badge .fa-cog {
  color: var(--info);
}

/* Desktop-only: hide minimized coverage badge on tablet/mobile */
@media (max-width: 991.98px) {
  .minimized-progress-badge {
    display: none !important;
  }
}

/* Notification variants */
.notification-success {
  border-left-color: var(--success);
}

.notification-success .notification-icon {
  color: var(--success);
  animation: icon-pop 0.35s ease-out;
}

.notification-check {
  display: inline-block;
  width: 14px;
  height: 8px;
  border-left: 2px solid currentcolor;
  border-bottom: 2px solid currentcolor;
  transform: rotate(-45deg);
  animation: checkmark-draw 0.4s ease-out;
}

@keyframes checkmark-draw {
  0% {
    width: 0;
    height: 0;
    opacity: 0;
  }

  50% {
    width: 14px;
    height: 0;
    opacity: 1;
  }

  100% {
    width: 14px;
    height: 8px;
    opacity: 1;
  }
}

.notification-error {
  border-left-color: var(--danger);
}

.notification-error .notification-icon {
  color: var(--danger);
}

.notification.notification-error.show {
  animation: shake 0.35s ease-out;
}

.notification-warning {
  border-left-color: var(--warning);
}

.notification-warning .notification-icon {
  color: var(--warning);
}

.notification-info {
  border-left-color: var(--info);
}

.notification-info .notification-icon {
  color: var(--info);
}

/* === Alerts - Minimal === */
.alert {
  border-radius: var(--radius-lg);
  border: 1px solid transparent;
  padding: var(--space-3) var(--space-4);
  margin-bottom: var(--space-4);
  display: flex;
  align-items: flex-start;
}

.alert-icon {
  /* Optional dedicated icon element */
  margin-right: var(--space-3);
  font-size: var(--font-size-xl);
  margin-top: var(--space-1);
}

.alert-heading {
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-2);
}

.alert .btn-close {
  opacity: 0.7;
  transition: opacity var(--transition-fast);
  margin-left: auto; /* Push to the right */
  padding: var(--space-3); /* Easier to click */
}

.alert .btn-close:hover {
  opacity: 1;
}

.alert-primary {
  background-color: rgb(var(--primary-rgb) / 10%);
  border-color: rgb(var(--primary-rgb) / 30%);
  color: var(--primary-dark);
}

.alert-primary .alert-icon,
.alert-primary .alert-heading {
  color: var(--primary-dark);
}

body.light-mode .alert-primary {
  color: var(--primary-dark);
} /* Ensure text contrast */

.alert-success {
  background-color: rgb(var(--success-rgb) / 10%);
  border-color: rgb(var(--success-rgb) / 30%);
  color: var(--success-dark);
}

.alert-success .alert-icon,
.alert-success .alert-heading {
  color: var(--success-dark);
}

body.light-mode .alert-success {
  color: var(--success-dark);
}

.alert-danger {
  background-color: rgb(var(--danger-rgb) / 10%);
  border-color: rgb(var(--danger-rgb) / 30%);
  color: var(--danger-dark);
}

.alert-danger .alert-icon,
.alert-danger .alert-heading {
  color: var(--danger-dark);
}

body.light-mode .alert-danger {
  color: var(--danger-dark);
}

.alert-warning {
  background-color: rgb(var(--warning-rgb) / 10%);
  border-color: rgb(var(--warning-rgb) / 30%);
  color: var(--warning-dark);
}

.alert-warning .alert-icon,
.alert-warning .alert-heading {
  color: var(--warning-dark);
}

body.light-mode .alert-warning {
  color: var(--warning-dark);
}

.alert-info {
  background-color: rgb(var(--info-rgb) / 10%);
  border-color: rgb(var(--info-rgb) / 30%);
  color: var(--info-dark);
}

.alert-info .alert-icon,
.alert-info .alert-heading {
  color: var(--info-dark);
}

body.light-mode .alert-info {
  color: var(--info-dark);
}
